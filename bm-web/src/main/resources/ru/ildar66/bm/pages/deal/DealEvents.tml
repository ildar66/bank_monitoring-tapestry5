<html t:type="layout" title="List events by Deal"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

    <fieldset>
    	<legend>Filter</legend>
    	<form t:type="form" t:id="searchEventsForm" t:clientValidation="none" t:autofocus="false">
    		<table style="width: 100%">
                <tr>
               		<td t:type="zone" t:id="searchPeriodZone" id="searchPeriodZone" t:clientValidation="none" t:autofocus="false"  t:update="show" style="vertical-align: top;">
                        <table>
                        	<tr><td colspan="2">Date deal:</td></tr>
                            <tr>
                                <td>Period from&nbsp;</td>
                                <td>
                                    <t:datefield t:value="filter.dateFrom"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Period to&nbsp;</td>
                                <td>
                                    <t:datefield t:value="filter.dateTo"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                    
                   <!--  <td style="vertical-align: top;">
                        <table>
                            <tr t:type="loop" t:source="statuses" t:value="status" t:formState="iteration">
                                <td>
                                    <input t:type="checkbox" t:id="statusCheckbox" t:value="statusSelected"/>
                                    <span t:type="label" t:for="statusCheckbox">${status.name}</span>
                                </td>
                            </tr>
                        </table>
                    </td> -->
                    
                    <td style="vertical-align: top;">
                        <table>
                            <tr>
                            	<td><input t:type="Checklist" t:id="checklist" t:model="filter.STATUSES" t:selected="filter.selectedStatuses" t:encoder="stringValueEncoder"/></td>
                            </tr>
                        </table>
                    </td>
               	</tr>
            </table>
    	</form>
    </fieldset>
    
    <table t:type="grid" t:source="dealInstances" t:row="dealInstance" t:pagerPosition="bottom" 
    	t:add="contractNumber, contractorName, amount, currency, dealType" style="width: 100%;">
     	<p:contractNumberCell>
            ${dealInstance?.deal?.contractNumber}
        </p:contractNumberCell>
        <p:contractorNameCell>
            ${dealInstance?.contractor?.name}
        </p:contractorNameCell>
     	<p:amountCell>
            ${dealInstance?.deal?.amount}
        </p:amountCell>
        <p:currencyCell>
            ${dealInstance?.deal?.currency}
        </p:currencyCell>
        <p:dealTypeCell>
            ${dealInstance?.deal?.type?.name}
        </p:dealTypeCell>        
        
        <p:empty>
            <h2>Deals not found</h2>
        </p:empty>
    </table>

</html>
